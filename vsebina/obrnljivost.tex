\section{Karakterizacija obrnljivosti}

\begin{definicija}
  \emph{Prosta zanka} na tipu \(A\) je sestavljena iz elementa \(\typejudgment{x}{A}\) in
  identifikacije \(x = x\). Tip prostih zank na tipu \(A\) označimo z
  \[\typename{free-loop}(A) := \sumtype{x}{A}{x = x}.\]
\end{definicija}

\begin{izrek}
  Tip obrnljivih funkcij med \(A\) in \(B\) je ekvivalenten tipu prostih zank
  na tipu \(A \simeq B\).
\end{izrek}

\begin{dokaz}
  Želimo konstruirati ekvivalenco tipa
  \[\sumtype{f}{A \to B}{\isinv(f)} \simeq \sumtype{e}{A \simeq B}{(e = e)}.\]
  Ker je \(\isequiv\) predikat in ker po trditvi \ref{inv-of-equiv}
  za vsako funkcijo \(f\) obstaja funkcija
  \(\typename{is-invertible}(f) \to \typename{is-equiv}(f)\), najprej opazimo, da po
  trditvi \ref{full-subtype} velja ekvivalenca
  \[\sumtype{f}{A \to B}{\isinv(f)} \simeq
    \sumtype{e}{A \simeq B}{\isinv(\map e).}
  \]
  Po posledici \ref{equiv-tot}
  torej zadošča pokazati, da za vsak element \(\dequiv{e}{A}{B}\) obstaja ekvivalenca
  \[\isinv(\map e) \simeq (e = e).\]
  Oglejmo si tip \[\isinv(\map e) = \sumtype{g}{B \to A}{(\map e \circ g \sim id) \times (g \circ \map e \sim id)}.\]
  Po asociativnosti odvisne vsote ta ekvivalenten tipu
  \begin{align*}
    & \sumtype{H}{\sumtype{g}{B \to A}{\map e \circ g \sim id}}{(\map H \circ \map e \sim id)} = \\
    & \sumtype{H}{\typename{section}(\map e)}{(\map H \circ \map e \sim id)},
  \end{align*}
  ker pa imajo po trditvi TODO ekvivalence kontraktibilen tip prerezov, po trditvi
  (TODO kontraktibilen bazni prostor) velja še ekvivalenca
  \[\sumtype{H}{\typename{section}(\map e)}{(\map H \circ \map e \sim id)} \simeq
    \left(\typename{sec} e \circ \map e \sim id\right).\]
  Sledi, da velja \(\isinv(\map e) \simeq (\typename{sec} e \circ \map e \sim id)\), dokaz pa
  zaključimo še z zaporedjem ekvivalenc, ki jih argumentiramo spodaj.
  \begin{align*}
    & (\typename{sec} e \circ \map e \sim id) \simeq \\
    & (\map e \circ \typename{sec}e \circ \map e \sim \map e) \simeq \\
    & (\map e \sim \map e) \simeq \\
    & (\map e = \map e) \simeq \\
    & (e = e)
  \end{align*}
  \begin{itemize}
  \item Ker je \(e\) ekvivalenca, je po trditvi TODO ekvivalenca tudi delovanje \(\map e\)
    na homotopije.
  \item Funkcija \(\typename{sec}e\) je prerez funkcije \(\map e\).
  \item TODO funext
  \item Po trditvi \ref{subtype-id} lahko zanko na funkciji \(\map e\) dvignemo do
    zanke na pripadajoči ekvivalenci \(e\).
  \end{itemize}
\end{dokaz}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Najdovski-27191110-2023"
%%% End:
